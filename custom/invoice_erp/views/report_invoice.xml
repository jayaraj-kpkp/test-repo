<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="report_invoice_document_custom">
    <t t-call="web.external_layout">
      <t t-foreach="docs" t-as="o">
        <main>
          <div class="page" style="font-family: Arial, sans-serif;">

            <!-- HEADER: Bilingual + Logo -->
            <div class="header-container" style="width:100%; margin-bottom:15px;">
              <table width="100%" style="border-bottom:2px solid #b30000; padding-bottom:10px;">
                <tr>
                  <td style="width:50%; text-align:left; vertical-align:top;">
                    <strong style="font-size:14px; color:#b30000;">SAMEER SHARAF AL OTAIBI TRADING COMPANY</strong><br/>
                    <span style="font-size:11px;">C.R.: 4030216154 | VAT Reg.: 311299944700003</span><br/>
                    <span style="font-size:11px;">Al Anwar Centre, Showroom No.12, Baladiya Street</span><br/>
                    <span style="font-size:11px;">Jeddah 23334, Saudi Arabia | Tel: 0536122833</span><br/>
                    <span style="font-size:11px;">Email: ssaoe.jeddah@gmail.com</span>
                  </td>
                  <td style="width:50%; text-align:right; vertical-align:top; direction:rtl;">
                    <strong style="font-size:14px; color:#b30000;">شركة سمير شرف العتيبي التجارية</strong><br/>
                    <span style="font-size:11px;">السجل التجاري: 4030216154 | ضريبة القيمة المضافة: 311299944700003</span><br/>
                    <span style="font-size:11px;">مركز الأنوار، معرض رقم 12، شارع البلدية</span><br/>
                    <span style="font-size:11px;">جدة 23334، المملكة العربية السعودية | هاتف: 0536122833</span><br/>
                    <span style="font-size:11px;">البريد الإلكتروني: ssaoe.jeddah@gmail.com</span>
                  </td>
                </tr>
              </table>

              <!-- Logo & Invoice Title -->
              <div style="text-align:center; margin:10px 0;">
                <img t-att-src="'/invoice_erp/static/src/img/faakart_logo.png'" style="max-height:70px;"/>
                <h2 style="color:#b30000; margin:5px 0; font-size:18px;">Tax Invoice / فاتورة ضريبية</h2>
              </div>
            </div>

            <!-- CUSTOMER + INVOICE INFO -->
            <div style="margin-bottom:15px;">
              <table width="100%" style="border:1px solid #ddd; font-size:12px; background:#f9f9f9;">
                <tr>
                  <td style="padding:8px; border-right:1px solid #ddd;"><strong>Sold To / العميل:</strong><br/><span t-field="o.partner_id.name"/></td>
                  <td style="padding:8px; border-right:1px solid #ddd;"><strong>VAT No:</strong><br/><span t-field="o.partner_id.vat"/></td>
                  <td style="padding:8px; border-right:1px solid #ddd;"><strong>Invoice No:</strong><br/><span t-field="o.name"/></td>
                  <td style="padding:8px;"><strong>Invoice Date:</strong><br/><span t-field="o.invoice_date"/></td>
                </tr>
              </table>
            </div>

            <!-- LINES TABLE (Alternating Row Colors) -->
            <table width="100%" style="border-collapse:collapse; font-size:11px; margin-bottom:15px;">
              <thead>
                <tr style="background:#b30000; color:#fff;">
                  <th style="padding:8px; text-align:left;">S.N</th>
                  <th style="padding:8px; text-align:left;">Description / الوصف</th>
                  <th style="padding:8px; text-align:left;">Code</th>
                  <th style="padding:8px; text-align:center;">Qty</th>
                  <th style="padding:8px; text-align:right;">Unit Price</th>
                  <th style="padding:8px; text-align:right;">VAT %</th>
                  <th style="padding:8px; text-align:right;">Total (SAR)</th>
                </tr>
              </thead>
              <tbody>
                <t t-foreach="enumerate(o.invoice_line_ids)" t-as="line_with_index">
                  <tr t-att-style="'background: #f9f9f9;' if line_with_index[0] % 2 == 0 else 'background: #fff;'">
                    <td style="padding:8px; border:1px solid #ddd;"><span t-esc="line_with_index[0] + 1"/></td>
                    <td style="padding:8px; border:1px solid #ddd;"><span t-esc="line_with_index[1].name"/></td>
                    <td style="padding:8px; border:1px solid #ddd;"><span t-esc="line_with_index[1].product_id.default_code or ''"/></td>
                    <td style="padding:8px; border:1px solid #ddd; text-align:center;"><span t-esc="line_with_index[1].quantity"/></td>
                    <td style="padding:8px; border:1px solid #ddd; text-align:right;"><span t-esc="format_amount(line_with_index[1].price_unit, o.currency_id)"/></td>
                    <td style="padding:8px; border:1px solid #ddd; text-align:right;">
                      <t t-foreach="line_with_index[1].tax_ids" t-as="tax">
                        <span t-esc="tax.amount"/>%
                      </t>
                    </td>
                    <td style="padding:8px; border:1px solid #ddd; text-align:right;"><span t-esc="format_amount(line_with_index[1].price_total, o.currency_id)"/></td>
                  </tr>
                </t>
              </tbody>
            </table>

            <!-- TOTALS SECTION -->
            <div style="display:flex; justify-content:flex-end; margin-top:10px;">
              <table style="border:1px solid #ddd; width:300px; font-size:12px;">
                <tr style="background:#f9f9f9;">
                  <td style="padding:8px;"><strong>Net Amount (SAR):</strong></td>
                  <td style="padding:8px; text-align:right;"><span t-esc="format_amount(o.amount_untaxed, o.currency_id)"/></td>
                </tr>
                <tr>
                  <td style="padding:8px;"><strong>VAT (SAR):</strong></td>
                  <td style="padding:8px; text-align:right;"><span t-esc="format_amount(o.amount_tax, o.currency_id)"/></td>
                </tr>
                <tr style="background:#b30000; color:#fff;">
                  <td style="padding:8px;"><strong>Grand Total (SAR):</strong></td>
                  <td style="padding:8px; text-align:right;"><strong><span t-esc="format_amount(o.amount_total, o.currency_id)"/></strong></td>
                </tr>
              </table>
            </div>

            <!-- AMOUNT IN WORDS -->
            <div style="margin-top:15px; padding:10px; border-top:2px dashed #b30000;">
              <p style="font-size:12px;"><strong>Amount in Words / المبلغ كتابة:</strong><br/>
              <span t-esc="o.currency_id.amount_to_text(o.amount_total)"/> ريال سعودي</p>
            </div>

            <!-- FOOTER (Optional) -->
            <div style="margin-top:20px; text-align:center; font-size:10px; color:#777;">
              <p>Thank you for your business! | شكراً لتعاملكم معنا</p>
            </div>
          </div>
        </main>
      </t>
    </t>
  </template>
</odoo>
